@isTest
public class CLASS_Cuenta_Test {
    @testSetup static void setup() {
        Account acc = new Account();
        Fraccionamiento__c f = new Fraccionamiento__c(Name = 'ACACIAS');
        insert f;
        acc.RecordTypeId =Schema.sObjectType.Account.getRecordTypeInfosBydevelopername().get('Prospecto_Persona_Fisica').getRecordTypeId();
        acc.FirstName= 'Lopez';
        acc.LastName= 'test';
        acc.Phone = '+528119928819';
        acc.Check_Apellido__c = true;
        acc.Otro_Telefono__c = '+528119928819';
        acc.Canal_de_Venta__c = 'PROSPECTO ASESOR';
        acc.Fraccionamiento_cta__c = f.id;
        insert acc;
    }
    static TestMethod void Test1() {
        Fraccionamiento__c f = new Fraccionamiento__c(Name = 'ACACIAS');
        insert f;
        Group g = new Group();
        g.Name = 'Cuentas - ACACIAS';
        insert g;
        Account account = new Account(FirstName= 'Lopez', LastName= 'test', RecordTypeId =Schema.sObjectType.Account.getRecordTypeInfosBydevelopername().get('Prospecto_Persona_Fisica').getRecordTypeId(),CorreoElectronico__c = 'test@prospects.com', Apellidomaterno_cta__c = 'dahuoh', 
                                      PersonBirthdate=date.today().addyears(-20),Phone = '+528119928819',Otro_Telefono__c = '+528119928819',TelefonoCelular__c='+525530303030',
                                      Canal_de_Venta__c = 'PROSPECTO ASESOR', Estatus_Lista_Negra_QEQ__c = 'VALIDADO');
        insert account;
        Account acc = account.clone(false, true, false, false);
        acc.FirstName= 'Test Lopez';
        acc.LastName= 'test Name';
        acc.RecordTypeId =Schema.sObjectType.Account.getRecordTypeInfosBydevelopername().get('Prospecto_Persona_Fisica').getRecordTypeId();
        acc.CorreoElectronico__c = 'test@prospects.com';
        acc.Apellidomaterno_cta__c = 'dahuoh';
        acc.PersonBirthdate=date.parse('16/09/1971');
        acc.Phone = '+528119928819';
        acc.Fraccionamiento_cta__c = f.id;
        acc.Otro_Telefono__c = '+528119928819';
        acc.Canal_de_Venta__c = 'PROSPECTO ASESOR';
        acc.Lugar_Nacimiento__c = 'AGUASCALIENTES';
        acc.Sexo__c = 'MASCULINO';
        acc.Fecha_de_Afluencia__c = date.today().addDays(-1);
       // acc.Asesor__c = user.Id;
        acc.Nombre_Fraccionamiento__c='ACACIAS';
        Test.startTest();
        insert acc;
        Map<Id, Account> oldTriggerMap = new Map<Id, Account>([SELECT Id, Name, anios__c, FechaNacimiento__c, Dias_fecha_nacimiento__c, Apellidomaterno_cta__c, Apellidopaterno_cta__c, Aprobalguard__c, Aprobcontact__c, Asesor__c, CanalVenta__c, Capcom_cta__c, Correoduenact__c, Correlect_cta__c, DependientesEconomicos__c, Empresa__c, Check_Apellido__c, Estatus__c, Estatus_Integracion__c, FechaAsignacion__c, FechaProspeccion__c, Fechest_cta__c, Fechprec_cta__c, Geolocalizacion__Latitude__s, Geolocalizacion__Longitude__s, Geolocalizacion__c, Hijos__c, Id_Ase__c, Id_Pro__c, Id_Colaborador_Javer__c, IdMasComercial__c, ID_owner__c, Aprobo_Check_Apellido__c, Meses__c, Monaho_cta__c, Montgast_cta__c, CURP__c, Homoclave__c, Nombre_cta__c, Nombre_Ase__c, Nombre_Pro__c, Nombre_Colaborador_Javer__c, NSS__c, Lead_Profiler__c, Prospectador__c, Puesto__c, Punnec_cta__c, Puntot_cta__c, Saldsub_cta__c, Sexo__c, SubCanalVenta__c, TelefonoCelular__c, TelefonoTrabajo__c, Tipo__c, TipoCredito__c, Capcomp_cta__c, Difdiastoday__c, NumeroExterior__c, NumeroInterior__c, Fraccionamiento_cta__c, Pais_cta__c, Estado_cta__c, Municipiocta__c, Colonia_cta__c, Calle__c, Ir_a_la_Cuenta__c, FechaDuplicada__c, ProfileID__c, Correodueante__c, Correo_Admin_de_Owner__c, Fecha_Prospeccion_vs_Today__c, Correo_Delegado_de_Owner__c, BillingColony__c, Campo_due_o_anterior_2__c, CorreAlterno__c, CorreoElectronico__c, Correoduenant__c, Entrega__c, Estadofracc_cta__c, Integracion_realizada__c, Municipio_cta__c, Notaria__c, Notario__c, Numerodecliente__c, ProductoFinanciero__c, ReferenciaBancariaCliente__c, Residentedeedificacion__c, Residente_de_Entrega__c, Sub_Canal_Venta__c, Telefono2__c, TelefonoOtro__c, TelefonoRecados__c, TipoCliente__c, Valida_Fecha_Duplicados2__c, Valida_Fecha_Duplicados__c, cuentaNueva__c, isATC__c, Medio_de_contacto_Preferido__c, Acepto_aviso_de_privacidad__c, Fecha_Reactivacion__c, Fecha_creacion__c, NumCliente__c, EstatusProceso__c, FechaFormalizacion__c, FechaEscrituracion__c, FechaReserva__c, NumProceso__c, Antiguedad__c, Fecha_de_Habitabilidad__c, Programadora_de_Vivienda_Id__c, Vivienda_Mas_Reciente__c, Tipo_de_Vivienda__c, SF_Link__c, Residente_Inactivo__c, JMC_AsesorAsignado__c, JMC_EstatusLead__c, JMC_Estatus_Cuenta__c, JMC_Estatus_Proceso__c, JMC_Fecha_Afluencia__c, JMC_Fecha_Cancelacion__c, JMC_Fecha_Entrega__c, JMC_Fecha_Visita__c, JMC_Lote__c, JMC_Manzana__c, JMC_Unidad_Privativa__c, Prospecto__c, UEN__c, JMC_Carga_inicial__c, JMC_TipoCargaInicial__c, Asesores__c, Nombre_Incompleto__c, Fecha_Estatus__c, Categoria__c, Etapa_Seguimiento__c, Estado_Civil__c, Edad__c, Nacionalidad__c, Lugar_Nacimiento__c, Ingresos_Mensuales__c, Ocupacion__c, MANAGEAPPROVALS__Active__c, RFC_Base__c, Homoclave_Texto__c, RFC_Completo__c, Tipo_Economia__c, QEQ_Nombre__c, Fecha_LP__c, Fecha_Asignacion_Asesor__c, Motivo_Asignacion__c, QEQ_Apellido_Paterno__c, QEQ_Apellido_Materno__c, QEQ_Fecha_Nacimiento__c, QEQ_Sexo__c, QEQ_CURP__c, QEQ_RFC__c, Fecha_Nacimiento_Texto__c, Gerente_Ventas__c, Desasignacion_Auto_Colaborador_Javer__c, Fecha_Colaborador_Javer__c, Parentesco__c, Origen__c, Recomendante__c, Tipo_Baja__c, Motivo_Baja__c, Motivo_Incubacion__c, Motivo_Reactivacion__c, Financiera__c, Producto_Financiera__c, Tipo_de_Prospeccion__c, Extension_Vencimiento_Asesor__c, Numero_de_Oportunidades__c, Estatus_Lista_Negra_QEQ__c, Dias_Colaborador_Javer__c, Colaborador_Javer_Anterior__c, Numero_Identificacion_Unico__c, Telefono_Principal__c, Prototipo_lookup__c, Jefe_Formalizacion__c, Estatus_Cliente__c, Fecha_Captura__c, Afluencia_Virtual__c, Estatus_Asesor__c, Estatus_Prospectador__c, Estatus_LP__c, Estatus_Colaborador_Javer__c, Fecha_Estatus_Asesor__c, Fecha_Estatus_Prospectador__c, Fecha_Estatus_LP__c, Fecha_Estatus_Colaborador_Javer__c, Otro_Telefono__c, Colaborador_Javer__c, Dias_Vencimiento_Asesor__c, Canal_de_Venta__c, Desasignacion_Auto_Asesor__c, Tipo_Credito__c, Desasignacion_Auto_Prospectador__c, Capacidad_de_compra__c, Desasignacion_Auto_Lead_Profiler__c, Fecha_Hora_LP__c, Fecha_Hora_Prospeccion__c, Producto_Financiero__c, Etapa__c, Nombre_Fraccionamiento__c, Visitas_Realizadas__c, Dias_Vencimiento_Prospectador__c, Dias_Vencimiento_LP__c, Dias_Vencimiento_Colaborador_Javer__c, Fecha_de_Afluencia__c, Sub_canal_de_venta__c, Email_Colaborador_Javer__c, Fecha_Hora_Asignacion_Asesor__c, Fecha_Vencimiento_LP__c, Fecha_Prospeccion__c, Fecha_Vencimiento_Prospectador__c, Fecha_Vencimiento_Asesor__c, Asesor_Vencido__c, Fecha_Vencimiento_Colaborador_Javer__c, Colaborador_Javer_Asignacion__c, Colaborador_Javer_Asignacion_Prorroga__c, Colaborador_Javer_Asignado__c, Colaborador_Javer_Asignado_Prorroga__c, Colaborador_Javer_Vencido__c, Fecha_Hora_Colaborador_Javer__c, Tipo_Contribuyente__c, Nombre__c, Contador_Auto_Desasignacion__c, No_Cliente__c, Prospectador_Primera_Parte_Formula__c, Prospectador_Segunda_Parte_Formula__c, Lead_Profiler_Primera_Parte_Formula__c, Lead_Profiler_Segunda_Parte_Formula__c, Colab_Javer_Primera_Parte_Formula__c, Colab_Javer_Segunda_Parte_Formula__c, Asesor_Primera_Parte_Formula__c, Asesor_Segunda_Parte_Formula__c, ID_CLIENTE_AR__c, ROW_ID__c, ID_PROCESO_AR__c, MENSAJE_API__c, RESPUESTA_API__c, Fecha_Notificacion_Vencimiento_Asesor__c, FechaNacimiento_Formula__c, Fecha_Asignacion_Asesor_Formula__c, Fecha_Propuesta__c, Fecha_de_Captura_Formula__c, Leader__c, Logo_Fraccionamiento__c, Nombre_del_Asesor__c, QUOTE_Correo_Asesor__c, QUOTE_Nombre_Fracc__c, QUOTE_Telefono_Asesor__c, Quote_Prototipo__c, RecordTypeName__c, Tipo_Formula__c, Aviso_de_Privadidad_Relacionado2__c, Aviso_de_Privadidad_Relacionado__c, Escolaridad__c, Fecha_a_Contactar__c, Fecha_de_Prospeccion__c, Motivo_de_Compra__c, Nombre_Completo__c, Nombre_del_Fraccionamiento__c, QUOTE_Bonificacion__c, QUOTE_Construccion__c, QUOTE_Credito_Bancario__c, QUOTE_Credito_INFONAVIT__c, QUOTE_Esquina__c, QUOTE_Fecha_de_Vencimiento__c, QUOTE_Folio_Cotizacion__c, QUOTE_Gastos_Credito__c, QUOTE_Gastos__c, QUOTE_Ingreso_Solicitado__c, QUOTE_Lote_Tipo__c, QUOTE_Mensualidad_Banco__c, QUOTE_Mensualidad_INFONAVIT__c, QUOTE_Otros__c, QUOTE_Paquete_Descripcion__c, QUOTE_Precio_de_Lista__c, QUOTE_Promocion__c, QUOTE_Subcuenta__c, QUOTE_Terreno_Excedente__c, QUOTE_Total_Paquete__c, QUOTE_Ubicacion_Especial__c, QUOTE_m2_Excedentes__c, Tipo_de_Direccion__c, Tipo_de_Vivienda_Picklist__c, Zona__c, debugg__c, QUOTE_Enganche_a_Pagar__c, QUOTE_Folio_Cotizacion_Formula__c, QUOTE_Monto_que_Recibira_JAVER__c, QUOTE_Precio_Total__c, QUOTE_Precio__c, QUOTE_Total_Atributos__c, QUOTE_Total_Terreno_Excedente__c, Baja_Incubadora__c, ValidationBypassDateTime__c, IsVRBypassed__c, Fecha_ltima_visita__c, Numero_de_Cliente_AutoNum__c, Estatus_Cliente_Anterior__c, Tipo_de_Tramite__c, et4ae5__HasOptedOutOfMobile__pc, et4ae5__Mobile_Country_Code__pc
                                                               FROM Account WHERE Id =:acc.Id ]);
        CLASS_Cuenta.CLASS_Cuenta();
        CLASS_Cuenta.generacionComplementoCURP(acc);
        CLASS_Cuenta.generacionDigitoVerCurp('Cuando alguno de los caracteres de la pre CURP no es válido.');
        CLASS_Cuenta.generacionHomoclave(acc);
        CLASS_Cuenta.guardaHistoricoAsignaciones(oldTriggerMap, new List<Account>{acc});
        CLASS_Cuenta.creaPrimeraVisitaEdicion( new List<Account>{acc}, oldTriggerMap);
        CLASS_Cuenta.asignaGerenteVentasEdicion( new List<Account>{acc}, oldTriggerMap);
        CLASS_Cuenta.validacionesCuenta( new List<Account>{acc}, oldTriggerMap);
        Test.stopTest();
    }
    
    static TestMethod void Test2() {
        UserRole userrole = [Select Id, DeveloperName From UserRole Where PortalType= 'None' Limit 1];
        Id profileId = [SELECT Id FROM Profile WHERE Name = 'JAVER - Generico' LIMIT 1].Id;
        system.debug('profileId='+profileId);
        User user = new User(alias = 'test123', email='test123@noemail.com',title= 'GENERICO',
                             emailencodingkey='UTF-8', lastname='Testing', languagelocalekey='en_US',UserroleId = userrole.id,
                             localesidkey='en_US', profileid = profileId, country='United States',IsActive =true,
                             timezonesidkey='America/Los_Angeles', username='testUserInfo@email.com',FRACCIONAMIENTOS__c = 'BOSQUE REAL;BOSQUES DEL NEVADO;ACACIAS;ACACIAS II',
                             Fraccionamiento_autorizado__c = 'BOSQUE REAL,ACACIAS,ACACIAS II', FraccionamientoAutorizados__c = 'BOSQUE REAL,ACACIAS,ACACIAS II');
        insert user;
        Account acc = [Select Id ,PersonBirthdate,RecordTypeId, FirstName ,LastName,Phone,anios__c, FechaNacimiento__c, Dias_fecha_nacimiento__c, Apellidomaterno_cta__c, Apellidopaterno_cta__c, Aprobalguard__c, Aprobcontact__c, 
                       Asesor__c, CanalVenta__c, Capcom_cta__c, Correoduenact__c, Correlect_cta__c, DependientesEconomicos__c, Empresa__c, Check_Apellido__c, Estatus__c, 
                       Estatus_Integracion__c, FechaAsignacion__c, FechaProspeccion__c, Fechest_cta__c, Fechprec_cta__c, Geolocalizacion__Latitude__s, Geolocalizacion__Longitude__s,
                       Geolocalizacion__c, Hijos__c, Id_Ase__c, Id_Pro__c, Id_Colaborador_Javer__c, IdMasComercial__c, ID_owner__c, Aprobo_Check_Apellido__c, Meses__c, Monaho_cta__c, 
                       Montgast_cta__c, CURP__c, Homoclave__c, Nombre_cta__c, Nombre_Ase__c, Nombre_Pro__c, Nombre_Colaborador_Javer__c, NSS__c, Lead_Profiler__c, Prospectador__c,
                       Puesto__c, Punnec_cta__c, Puntot_cta__c, Saldsub_cta__c, Sexo__c, SubCanalVenta__c, TelefonoCelular__c, TelefonoTrabajo__c, Tipo__c, TipoCredito__c, 
                       Capcomp_cta__c, Difdiastoday__c, NumeroExterior__c, NumeroInterior__c, Fraccionamiento_cta__c, Pais_cta__c, Estado_cta__c, Municipiocta__c, Colonia_cta__c, 
                       Calle__c, Ir_a_la_Cuenta__c, FechaDuplicada__c, ProfileID__c, Correodueante__c, Correo_Admin_de_Owner__c, Fecha_Prospeccion_vs_Today__c,
                       Correo_Delegado_de_Owner__c, BillingColony__c, Campo_due_o_anterior_2__c, CorreAlterno__c, CorreoElectronico__c, Correoduenant__c, Entrega__c, 
                       Estadofracc_cta__c, Integracion_realizada__c, Municipio_cta__c, Notaria__c, Notario__c, Numerodecliente__c, ProductoFinanciero__c, ReferenciaBancariaCliente__c,
                       Residentedeedificacion__c, Residente_de_Entrega__c, Sub_Canal_Venta__c, Telefono2__c, TelefonoOtro__c, TelefonoRecados__c, TipoCliente__c,
                       Valida_Fecha_Duplicados2__c, Valida_Fecha_Duplicados__c, cuentaNueva__c, isATC__c, Medio_de_contacto_Preferido__c, Acepto_aviso_de_privacidad__c, 
                       Fecha_Reactivacion__c, Fecha_creacion__c, NumCliente__c, EstatusProceso__c, FechaFormalizacion__c, FechaEscrituracion__c, FechaReserva__c, NumProceso__c, Antiguedad__c, Fecha_de_Habitabilidad__c, Programadora_de_Vivienda_Id__c, Vivienda_Mas_Reciente__c, Tipo_de_Vivienda__c, SF_Link__c, Residente_Inactivo__c, JMC_AsesorAsignado__c, JMC_EstatusLead__c, JMC_Estatus_Cuenta__c, JMC_Estatus_Proceso__c, JMC_Fecha_Afluencia__c, JMC_Fecha_Cancelacion__c, JMC_Fecha_Entrega__c, JMC_Fecha_Visita__c, JMC_Lote__c, JMC_Manzana__c, JMC_Unidad_Privativa__c, Prospecto__c, UEN__c, JMC_Carga_inicial__c, JMC_TipoCargaInicial__c, Asesores__c, Nombre_Incompleto__c, Fecha_Estatus__c, Categoria__c, Etapa_Seguimiento__c, Estado_Civil__c, Edad__c, Nacionalidad__c, Lugar_Nacimiento__c, Ingresos_Mensuales__c, Ocupacion__c, MANAGEAPPROVALS__Active__c, RFC_Base__c, Homoclave_Texto__c, RFC_Completo__c, Tipo_Economia__c, QEQ_Nombre__c, Fecha_LP__c, Fecha_Asignacion_Asesor__c, Motivo_Asignacion__c, QEQ_Apellido_Paterno__c, QEQ_Apellido_Materno__c, QEQ_Fecha_Nacimiento__c, QEQ_Sexo__c, QEQ_CURP__c, QEQ_RFC__c, Fecha_Nacimiento_Texto__c, Gerente_Ventas__c, Desasignacion_Auto_Colaborador_Javer__c, Fecha_Colaborador_Javer__c, Parentesco__c, Origen__c, Recomendante__c, Tipo_Baja__c, Motivo_Baja__c, Motivo_Incubacion__c, Motivo_Reactivacion__c, Financiera__c, Producto_Financiera__c, Tipo_de_Prospeccion__c, Extension_Vencimiento_Asesor__c, Numero_de_Oportunidades__c, Estatus_Lista_Negra_QEQ__c, Dias_Colaborador_Javer__c, Colaborador_Javer_Anterior__c, Numero_Identificacion_Unico__c, Telefono_Principal__c, Prototipo_lookup__c, Jefe_Formalizacion__c, Estatus_Cliente__c, Fecha_Captura__c, Afluencia_Virtual__c, Estatus_Asesor__c, Estatus_Prospectador__c, Estatus_LP__c, Estatus_Colaborador_Javer__c, Fecha_Estatus_Asesor__c, Fecha_Estatus_Prospectador__c, Fecha_Estatus_LP__c, Fecha_Estatus_Colaborador_Javer__c, Otro_Telefono__c, Colaborador_Javer__c, Dias_Vencimiento_Asesor__c, Canal_de_Venta__c, Desasignacion_Auto_Asesor__c, Tipo_Credito__c, Desasignacion_Auto_Prospectador__c, Capacidad_de_compra__c, Desasignacion_Auto_Lead_Profiler__c, Fecha_Hora_LP__c, Fecha_Hora_Prospeccion__c, Producto_Financiero__c, Etapa__c, Nombre_Fraccionamiento__c, Visitas_Realizadas__c, Dias_Vencimiento_Prospectador__c, Dias_Vencimiento_LP__c, Dias_Vencimiento_Colaborador_Javer__c, Fecha_de_Afluencia__c, Sub_canal_de_venta__c, Email_Colaborador_Javer__c, Fecha_Hora_Asignacion_Asesor__c, Fecha_Vencimiento_LP__c, Fecha_Prospeccion__c, Fecha_Vencimiento_Prospectador__c, Fecha_Vencimiento_Asesor__c, Asesor_Vencido__c, Fecha_Vencimiento_Colaborador_Javer__c, Colaborador_Javer_Asignacion__c, Colaborador_Javer_Asignacion_Prorroga__c, Colaborador_Javer_Asignado__c, Colaborador_Javer_Asignado_Prorroga__c, Colaborador_Javer_Vencido__c, Fecha_Hora_Colaborador_Javer__c, Tipo_Contribuyente__c, Nombre__c, Contador_Auto_Desasignacion__c, No_Cliente__c, Prospectador_Primera_Parte_Formula__c, Prospectador_Segunda_Parte_Formula__c, Lead_Profiler_Primera_Parte_Formula__c, Lead_Profiler_Segunda_Parte_Formula__c, Colab_Javer_Primera_Parte_Formula__c, Colab_Javer_Segunda_Parte_Formula__c, Asesor_Primera_Parte_Formula__c, Asesor_Segunda_Parte_Formula__c, ID_CLIENTE_AR__c, ROW_ID__c, ID_PROCESO_AR__c, MENSAJE_API__c, RESPUESTA_API__c, Fecha_Notificacion_Vencimiento_Asesor__c, FechaNacimiento_Formula__c, Fecha_Asignacion_Asesor_Formula__c, Fecha_Propuesta__c, Fecha_de_Captura_Formula__c, Leader__c, Logo_Fraccionamiento__c, Nombre_del_Asesor__c, QUOTE_Correo_Asesor__c, QUOTE_Nombre_Fracc__c, QUOTE_Telefono_Asesor__c, Quote_Prototipo__c, RecordTypeName__c, Tipo_Formula__c, Aviso_de_Privadidad_Relacionado2__c, Aviso_de_Privadidad_Relacionado__c, Escolaridad__c, Fecha_a_Contactar__c, Fecha_de_Prospeccion__c, Motivo_de_Compra__c, Nombre_Completo__c, Nombre_del_Fraccionamiento__c, QUOTE_Bonificacion__c, QUOTE_Construccion__c, QUOTE_Credito_Bancario__c, QUOTE_Credito_INFONAVIT__c, QUOTE_Esquina__c, QUOTE_Fecha_de_Vencimiento__c, QUOTE_Folio_Cotizacion__c, QUOTE_Gastos_Credito__c, QUOTE_Gastos__c, QUOTE_Ingreso_Solicitado__c, QUOTE_Lote_Tipo__c, QUOTE_Mensualidad_Banco__c, QUOTE_Mensualidad_INFONAVIT__c, QUOTE_Otros__c, QUOTE_Paquete_Descripcion__c, QUOTE_Precio_de_Lista__c, QUOTE_Promocion__c, QUOTE_Subcuenta__c, QUOTE_Terreno_Excedente__c, QUOTE_Total_Paquete__c, QUOTE_Ubicacion_Especial__c, QUOTE_m2_Excedentes__c, Tipo_de_Direccion__c, Tipo_de_Vivienda_Picklist__c, Zona__c, debugg__c, QUOTE_Enganche_a_Pagar__c, QUOTE_Folio_Cotizacion_Formula__c, QUOTE_Monto_que_Recibira_JAVER__c, QUOTE_Precio_Total__c, QUOTE_Precio__c, QUOTE_Total_Atributos__c, QUOTE_Total_Terreno_Excedente__c, Baja_Incubadora__c, ValidationBypassDateTime__c, IsVRBypassed__c, Fecha_ltima_visita__c, Numero_de_Cliente_AutoNum__c, Estatus_Cliente_Anterior__c, Tipo_de_Tramite__c, et4ae5__HasOptedOutOfMobile__pc, et4ae5__Mobile_Country_Code__pc
                       FROM Account where FirstName = 'Lopez'];
        acc.Lead_Profiler__c = user.Id;
        System.runAs(user){
            Map<Id, Account> oldTriggerMap = new Map<Id, Account>([SELECT Id, Name, anios__c, FechaNacimiento__c, Dias_fecha_nacimiento__c, Apellidomaterno_cta__c, Apellidopaterno_cta__c, Aprobalguard__c, Aprobcontact__c, 
                                                                   Asesor__c, CanalVenta__c, Capcom_cta__c, Correoduenact__c, Correlect_cta__c, DependientesEconomicos__c, Empresa__c, Check_Apellido__c, Estatus__c, 
                                                                   Estatus_Integracion__c, FechaAsignacion__c, FechaProspeccion__c, Fechest_cta__c, Fechprec_cta__c, Geolocalizacion__Latitude__s, Geolocalizacion__Longitude__s,
                                                                   Geolocalizacion__c, Hijos__c, Id_Ase__c, Id_Pro__c, Id_Colaborador_Javer__c, IdMasComercial__c, ID_owner__c, Aprobo_Check_Apellido__c, Meses__c, Monaho_cta__c, 
                                                                   Montgast_cta__c, CURP__c, Homoclave__c, Nombre_cta__c, Nombre_Ase__c, Nombre_Pro__c, Nombre_Colaborador_Javer__c, NSS__c, Lead_Profiler__c, Prospectador__c,
                                                                   Puesto__c, Punnec_cta__c, Puntot_cta__c, Saldsub_cta__c, Sexo__c, SubCanalVenta__c, TelefonoCelular__c, TelefonoTrabajo__c, Tipo__c, TipoCredito__c, 
                                                                   Capcomp_cta__c, Difdiastoday__c, NumeroExterior__c, NumeroInterior__c, Fraccionamiento_cta__c, Pais_cta__c, Estado_cta__c, Municipiocta__c, Colonia_cta__c, 
                                                                   Calle__c, Ir_a_la_Cuenta__c, FechaDuplicada__c, ProfileID__c, Correodueante__c, Correo_Admin_de_Owner__c, Fecha_Prospeccion_vs_Today__c,
                                                                   Correo_Delegado_de_Owner__c, BillingColony__c, Campo_due_o_anterior_2__c, CorreAlterno__c, CorreoElectronico__c, Correoduenant__c, Entrega__c, 
                                                                   Estadofracc_cta__c, Integracion_realizada__c, Municipio_cta__c, Notaria__c, Notario__c, Numerodecliente__c, ProductoFinanciero__c, ReferenciaBancariaCliente__c,
                                                                   Residentedeedificacion__c, Residente_de_Entrega__c, Sub_Canal_Venta__c, Telefono2__c, TelefonoOtro__c, TelefonoRecados__c, TipoCliente__c,
                                                                   Valida_Fecha_Duplicados2__c, Valida_Fecha_Duplicados__c, cuentaNueva__c, isATC__c, Medio_de_contacto_Preferido__c, Acepto_aviso_de_privacidad__c, 
                                                                   Fecha_Reactivacion__c, Fecha_creacion__c, NumCliente__c, EstatusProceso__c, FechaFormalizacion__c, FechaEscrituracion__c, FechaReserva__c, NumProceso__c, Antiguedad__c, Fecha_de_Habitabilidad__c, Programadora_de_Vivienda_Id__c, Vivienda_Mas_Reciente__c, Tipo_de_Vivienda__c, SF_Link__c, Residente_Inactivo__c, JMC_AsesorAsignado__c, JMC_EstatusLead__c, JMC_Estatus_Cuenta__c, JMC_Estatus_Proceso__c, JMC_Fecha_Afluencia__c, JMC_Fecha_Cancelacion__c, JMC_Fecha_Entrega__c, JMC_Fecha_Visita__c, JMC_Lote__c, JMC_Manzana__c, JMC_Unidad_Privativa__c, Prospecto__c, UEN__c, JMC_Carga_inicial__c, JMC_TipoCargaInicial__c, Asesores__c, Nombre_Incompleto__c, Fecha_Estatus__c, Categoria__c, Etapa_Seguimiento__c, Estado_Civil__c, Edad__c, Nacionalidad__c, Lugar_Nacimiento__c, Ingresos_Mensuales__c, Ocupacion__c, MANAGEAPPROVALS__Active__c, RFC_Base__c, Homoclave_Texto__c, RFC_Completo__c, Tipo_Economia__c, QEQ_Nombre__c, Fecha_LP__c, Fecha_Asignacion_Asesor__c, Motivo_Asignacion__c, QEQ_Apellido_Paterno__c, QEQ_Apellido_Materno__c, QEQ_Fecha_Nacimiento__c, QEQ_Sexo__c, QEQ_CURP__c, QEQ_RFC__c, Fecha_Nacimiento_Texto__c, Gerente_Ventas__c, Desasignacion_Auto_Colaborador_Javer__c, Fecha_Colaborador_Javer__c, Parentesco__c, Origen__c, Recomendante__c, Tipo_Baja__c, Motivo_Baja__c, Motivo_Incubacion__c, Motivo_Reactivacion__c, Financiera__c, Producto_Financiera__c, Tipo_de_Prospeccion__c, Extension_Vencimiento_Asesor__c, Numero_de_Oportunidades__c, Estatus_Lista_Negra_QEQ__c, Dias_Colaborador_Javer__c, Colaborador_Javer_Anterior__c, Numero_Identificacion_Unico__c, Telefono_Principal__c, Prototipo_lookup__c, Jefe_Formalizacion__c, Estatus_Cliente__c, Fecha_Captura__c, Afluencia_Virtual__c, Estatus_Asesor__c, Estatus_Prospectador__c, Estatus_LP__c, Estatus_Colaborador_Javer__c, Fecha_Estatus_Asesor__c, Fecha_Estatus_Prospectador__c, Fecha_Estatus_LP__c, Fecha_Estatus_Colaborador_Javer__c, Otro_Telefono__c, Colaborador_Javer__c, Dias_Vencimiento_Asesor__c, Canal_de_Venta__c, Desasignacion_Auto_Asesor__c, Tipo_Credito__c, Desasignacion_Auto_Prospectador__c, Capacidad_de_compra__c, Desasignacion_Auto_Lead_Profiler__c, Fecha_Hora_LP__c, Fecha_Hora_Prospeccion__c, Producto_Financiero__c, Etapa__c, Nombre_Fraccionamiento__c, Visitas_Realizadas__c, Dias_Vencimiento_Prospectador__c, Dias_Vencimiento_LP__c, Dias_Vencimiento_Colaborador_Javer__c, Fecha_de_Afluencia__c, Sub_canal_de_venta__c, Email_Colaborador_Javer__c, Fecha_Hora_Asignacion_Asesor__c, Fecha_Vencimiento_LP__c, Fecha_Prospeccion__c, Fecha_Vencimiento_Prospectador__c, Fecha_Vencimiento_Asesor__c, Asesor_Vencido__c, Fecha_Vencimiento_Colaborador_Javer__c, Colaborador_Javer_Asignacion__c, Colaborador_Javer_Asignacion_Prorroga__c, Colaborador_Javer_Asignado__c, Colaborador_Javer_Asignado_Prorroga__c, Colaborador_Javer_Vencido__c, Fecha_Hora_Colaborador_Javer__c, Tipo_Contribuyente__c, Nombre__c, Contador_Auto_Desasignacion__c, No_Cliente__c, Prospectador_Primera_Parte_Formula__c, Prospectador_Segunda_Parte_Formula__c, Lead_Profiler_Primera_Parte_Formula__c, Lead_Profiler_Segunda_Parte_Formula__c, Colab_Javer_Primera_Parte_Formula__c, Colab_Javer_Segunda_Parte_Formula__c, Asesor_Primera_Parte_Formula__c, Asesor_Segunda_Parte_Formula__c, ID_CLIENTE_AR__c, ROW_ID__c, ID_PROCESO_AR__c, MENSAJE_API__c, RESPUESTA_API__c, Fecha_Notificacion_Vencimiento_Asesor__c, FechaNacimiento_Formula__c, Fecha_Asignacion_Asesor_Formula__c, Fecha_Propuesta__c, Fecha_de_Captura_Formula__c, Leader__c, Logo_Fraccionamiento__c, Nombre_del_Asesor__c, QUOTE_Correo_Asesor__c, QUOTE_Nombre_Fracc__c, QUOTE_Telefono_Asesor__c, Quote_Prototipo__c, RecordTypeName__c, Tipo_Formula__c, Aviso_de_Privadidad_Relacionado2__c, Aviso_de_Privadidad_Relacionado__c, Escolaridad__c, Fecha_a_Contactar__c, Fecha_de_Prospeccion__c, Motivo_de_Compra__c, Nombre_Completo__c, Nombre_del_Fraccionamiento__c, QUOTE_Bonificacion__c, QUOTE_Construccion__c, QUOTE_Credito_Bancario__c, QUOTE_Credito_INFONAVIT__c, QUOTE_Esquina__c, QUOTE_Fecha_de_Vencimiento__c, QUOTE_Folio_Cotizacion__c, QUOTE_Gastos_Credito__c, QUOTE_Gastos__c, QUOTE_Ingreso_Solicitado__c, QUOTE_Lote_Tipo__c, QUOTE_Mensualidad_Banco__c, QUOTE_Mensualidad_INFONAVIT__c, QUOTE_Otros__c, QUOTE_Paquete_Descripcion__c, QUOTE_Precio_de_Lista__c, QUOTE_Promocion__c, QUOTE_Subcuenta__c, QUOTE_Terreno_Excedente__c, QUOTE_Total_Paquete__c, QUOTE_Ubicacion_Especial__c, QUOTE_m2_Excedentes__c, Tipo_de_Direccion__c, Tipo_de_Vivienda_Picklist__c, Zona__c, debugg__c, QUOTE_Enganche_a_Pagar__c, QUOTE_Folio_Cotizacion_Formula__c, QUOTE_Monto_que_Recibira_JAVER__c, QUOTE_Precio_Total__c, QUOTE_Precio__c, QUOTE_Total_Atributos__c, QUOTE_Total_Terreno_Excedente__c, Baja_Incubadora__c, ValidationBypassDateTime__c, IsVRBypassed__c, Fecha_ltima_visita__c, Numero_de_Cliente_AutoNum__c, Estatus_Cliente_Anterior__c, Tipo_de_Tramite__c, et4ae5__HasOptedOutOfMobile__pc, et4ae5__Mobile_Country_Code__pc
                                                                   FROM Account WHERE Id =:acc.Id ]);
            Test.startTest();
            // Update acc;
            CLASS_Cuenta.validacionesCuenta( new List<Account>{acc}, oldTriggerMap);
            Test.stopTest();
        }
    }
    static TestMethod void Test3() {
        Id idTipoRegistroProspectoPersonaFisica = Schema.SObjectType.Account.getRecordTypeInfosByDeveloperName().get('Prospecto_Persona_Fisica').getRecordTypeId();
        Fraccionamiento__c f = new Fraccionamiento__c(name = 'ACACIAS');insert f;
        Fraccionamiento__c f1 = new Fraccionamiento__c(name = 'ACACIAS');insert f1;
        Account acc = new Account(Apellidomaterno_cta__c = 'materno',FirstName = 'DA ame',LastName = 'lName', TelefonoCelular__c = '+525656566567',phone = '+525656566567',
                                  Fraccionamiento_cta__c = f1.id,RecordTypeId = idTipoRegistroProspectoPersonaFisica);
        Account acc1 = acc.clone(false, true, false, false);
        acc1.Canal_de_Venta__c = 'MEDIOS DIGITALES';
        acc1.Sub_canal_de_venta__c = '';
        acc1.Check_Apellido__c = true;
        acc1.Sexo__c = 'MASCULINO';
        acc1.Nacionalidad__c = 'MEXICANA';
        acc1.Lugar_Nacimiento__c = 'AGUASCALIENTES';
        acc1.CorreoElectronico__c = 'test@portal123453.com';
        acc1.Fecha_de_Afluencia__c = date.today().addDays(-1);
        acc1.Fraccionamiento_cta__c = f1.id;
        insert acc1;
        CLASS_Cuenta CLASSCuenta = new CLASS_Cuenta(); 
        CLASS_Cuenta.generacionComplementoCURP(acc1);
        CLASS_Cuenta.generacionDigitoVerCurp('Cuando alguno de los caracteres de la pre CURP no es válido.');
        CLASS_Cuenta.generacionHomoclave(acc1);
        Colaborador_Javer__c col = new Colaborador_Javer__c();
        insert col;
        Map<Id, Account> oldTriggerMap = new Map<Id, Account>([SELECT Id, Name, anios__c, FechaNacimiento__c, Dias_fecha_nacimiento__c, Apellidomaterno_cta__c, Apellidopaterno_cta__c, Aprobalguard__c, Aprobcontact__c, Asesor__c, CanalVenta__c, Capcom_cta__c, Correoduenact__c, Correlect_cta__c, DependientesEconomicos__c, Empresa__c, Check_Apellido__c, Estatus__c, Estatus_Integracion__c, FechaAsignacion__c, FechaProspeccion__c, Fechest_cta__c, Fechprec_cta__c, Geolocalizacion__Latitude__s, Geolocalizacion__Longitude__s, Geolocalizacion__c, Hijos__c, Id_Ase__c, Id_Pro__c, Id_Colaborador_Javer__c, IdMasComercial__c, ID_owner__c, Aprobo_Check_Apellido__c, Meses__c, Monaho_cta__c, Montgast_cta__c, CURP__c, Homoclave__c, Nombre_cta__c, Nombre_Ase__c, Nombre_Pro__c, Nombre_Colaborador_Javer__c, NSS__c, Lead_Profiler__c, Prospectador__c, Puesto__c, Punnec_cta__c, Puntot_cta__c, Saldsub_cta__c, Sexo__c, SubCanalVenta__c, TelefonoCelular__c, TelefonoTrabajo__c, Tipo__c, TipoCredito__c, Capcomp_cta__c, Difdiastoday__c, NumeroExterior__c, NumeroInterior__c, Fraccionamiento_cta__c, Pais_cta__c, Estado_cta__c, Municipiocta__c, Colonia_cta__c, Calle__c, Ir_a_la_Cuenta__c, FechaDuplicada__c, ProfileID__c, Correodueante__c, Correo_Admin_de_Owner__c, Fecha_Prospeccion_vs_Today__c, Correo_Delegado_de_Owner__c, BillingColony__c, Campo_due_o_anterior_2__c, CorreAlterno__c, CorreoElectronico__c, Correoduenant__c, Entrega__c, Estadofracc_cta__c, Integracion_realizada__c, Municipio_cta__c, Notaria__c, Notario__c, Numerodecliente__c, ProductoFinanciero__c, ReferenciaBancariaCliente__c, Residentedeedificacion__c, Residente_de_Entrega__c, Sub_Canal_Venta__c, Telefono2__c, TelefonoOtro__c, TelefonoRecados__c, TipoCliente__c, Valida_Fecha_Duplicados2__c, Valida_Fecha_Duplicados__c, cuentaNueva__c, isATC__c, Medio_de_contacto_Preferido__c, Acepto_aviso_de_privacidad__c, Fecha_Reactivacion__c, Fecha_creacion__c, NumCliente__c, EstatusProceso__c, FechaFormalizacion__c, FechaEscrituracion__c, FechaReserva__c, NumProceso__c, Antiguedad__c, Fecha_de_Habitabilidad__c, Programadora_de_Vivienda_Id__c, Vivienda_Mas_Reciente__c, Tipo_de_Vivienda__c, SF_Link__c, Residente_Inactivo__c, JMC_AsesorAsignado__c, JMC_EstatusLead__c, JMC_Estatus_Cuenta__c, JMC_Estatus_Proceso__c, JMC_Fecha_Afluencia__c, JMC_Fecha_Cancelacion__c, JMC_Fecha_Entrega__c, JMC_Fecha_Visita__c, JMC_Lote__c, JMC_Manzana__c, JMC_Unidad_Privativa__c, Prospecto__c, UEN__c, JMC_Carga_inicial__c, JMC_TipoCargaInicial__c, Asesores__c, Nombre_Incompleto__c, Fecha_Estatus__c, Categoria__c, Etapa_Seguimiento__c, Estado_Civil__c, Edad__c, Nacionalidad__c, Lugar_Nacimiento__c, Ingresos_Mensuales__c, Ocupacion__c, MANAGEAPPROVALS__Active__c, RFC_Base__c, Homoclave_Texto__c, RFC_Completo__c, Tipo_Economia__c, QEQ_Nombre__c, Fecha_LP__c, Fecha_Asignacion_Asesor__c, Motivo_Asignacion__c, QEQ_Apellido_Paterno__c, QEQ_Apellido_Materno__c, QEQ_Fecha_Nacimiento__c, QEQ_Sexo__c, QEQ_CURP__c, QEQ_RFC__c, Fecha_Nacimiento_Texto__c, Gerente_Ventas__c, Desasignacion_Auto_Colaborador_Javer__c, Fecha_Colaborador_Javer__c, Parentesco__c, Origen__c, Recomendante__c, Tipo_Baja__c, Motivo_Baja__c, Motivo_Incubacion__c, Motivo_Reactivacion__c, Financiera__c, Producto_Financiera__c, Tipo_de_Prospeccion__c, Extension_Vencimiento_Asesor__c, Numero_de_Oportunidades__c, Estatus_Lista_Negra_QEQ__c, Dias_Colaborador_Javer__c, Colaborador_Javer_Anterior__c, Numero_Identificacion_Unico__c, Telefono_Principal__c, Prototipo_lookup__c, Jefe_Formalizacion__c, Estatus_Cliente__c, Fecha_Captura__c, Afluencia_Virtual__c, Estatus_Asesor__c, Estatus_Prospectador__c, Estatus_LP__c, Estatus_Colaborador_Javer__c, Fecha_Estatus_Asesor__c, Fecha_Estatus_Prospectador__c, Fecha_Estatus_LP__c, Fecha_Estatus_Colaborador_Javer__c, Otro_Telefono__c, Colaborador_Javer__c, Dias_Vencimiento_Asesor__c, Canal_de_Venta__c, Desasignacion_Auto_Asesor__c, Tipo_Credito__c, Desasignacion_Auto_Prospectador__c, Capacidad_de_compra__c, Desasignacion_Auto_Lead_Profiler__c, Fecha_Hora_LP__c, Fecha_Hora_Prospeccion__c, Producto_Financiero__c, Etapa__c, Nombre_Fraccionamiento__c, Visitas_Realizadas__c, Dias_Vencimiento_Prospectador__c, Dias_Vencimiento_LP__c, Dias_Vencimiento_Colaborador_Javer__c, Fecha_de_Afluencia__c, Sub_canal_de_venta__c, Email_Colaborador_Javer__c, Fecha_Hora_Asignacion_Asesor__c, Fecha_Vencimiento_LP__c, Fecha_Prospeccion__c, Fecha_Vencimiento_Prospectador__c, Fecha_Vencimiento_Asesor__c, Asesor_Vencido__c, Fecha_Vencimiento_Colaborador_Javer__c, Colaborador_Javer_Asignacion__c, Colaborador_Javer_Asignacion_Prorroga__c, Colaborador_Javer_Asignado__c, Colaborador_Javer_Asignado_Prorroga__c, Colaborador_Javer_Vencido__c, Fecha_Hora_Colaborador_Javer__c, Tipo_Contribuyente__c, Nombre__c, Contador_Auto_Desasignacion__c, No_Cliente__c, Prospectador_Primera_Parte_Formula__c, Prospectador_Segunda_Parte_Formula__c, Lead_Profiler_Primera_Parte_Formula__c, Lead_Profiler_Segunda_Parte_Formula__c, Colab_Javer_Primera_Parte_Formula__c, Colab_Javer_Segunda_Parte_Formula__c, Asesor_Primera_Parte_Formula__c, Asesor_Segunda_Parte_Formula__c, ID_CLIENTE_AR__c, ROW_ID__c, ID_PROCESO_AR__c, MENSAJE_API__c, RESPUESTA_API__c, Fecha_Notificacion_Vencimiento_Asesor__c, FechaNacimiento_Formula__c, Fecha_Asignacion_Asesor_Formula__c, Fecha_Propuesta__c, Fecha_de_Captura_Formula__c, Leader__c, Logo_Fraccionamiento__c, Nombre_del_Asesor__c, QUOTE_Correo_Asesor__c, QUOTE_Nombre_Fracc__c, QUOTE_Telefono_Asesor__c, Quote_Prototipo__c, RecordTypeName__c, Tipo_Formula__c, Aviso_de_Privadidad_Relacionado2__c, Aviso_de_Privadidad_Relacionado__c, Escolaridad__c, Fecha_a_Contactar__c, Fecha_de_Prospeccion__c, Motivo_de_Compra__c, Nombre_Completo__c, Nombre_del_Fraccionamiento__c, QUOTE_Bonificacion__c, QUOTE_Construccion__c, QUOTE_Credito_Bancario__c, QUOTE_Credito_INFONAVIT__c, QUOTE_Esquina__c, QUOTE_Fecha_de_Vencimiento__c, QUOTE_Folio_Cotizacion__c, QUOTE_Gastos_Credito__c, QUOTE_Gastos__c, QUOTE_Ingreso_Solicitado__c, QUOTE_Lote_Tipo__c, QUOTE_Mensualidad_Banco__c, QUOTE_Mensualidad_INFONAVIT__c, QUOTE_Otros__c, QUOTE_Paquete_Descripcion__c, QUOTE_Precio_de_Lista__c, QUOTE_Promocion__c, QUOTE_Subcuenta__c, QUOTE_Terreno_Excedente__c, QUOTE_Total_Paquete__c, QUOTE_Ubicacion_Especial__c, QUOTE_m2_Excedentes__c, Tipo_de_Direccion__c, Tipo_de_Vivienda_Picklist__c, Zona__c, debugg__c, QUOTE_Enganche_a_Pagar__c, QUOTE_Folio_Cotizacion_Formula__c, QUOTE_Monto_que_Recibira_JAVER__c, QUOTE_Precio_Total__c, QUOTE_Precio__c, QUOTE_Total_Atributos__c, QUOTE_Total_Terreno_Excedente__c, Baja_Incubadora__c, ValidationBypassDateTime__c, IsVRBypassed__c, Fecha_ltima_visita__c, Numero_de_Cliente_AutoNum__c, Estatus_Cliente_Anterior__c, Tipo_de_Tramite__c, et4ae5__HasOptedOutOfMobile__pc, et4ae5__Mobile_Country_Code__pc
                                                               FROM Account WHERE Id =:acc1.Id ]);
        acc1.Colaborador_Javer__c = col.id;
        acc1.Fecha_de_Afluencia__c = Date.today();
        acc1.Aprobo_Check_Apellido__c = false; 
        acc1.Fraccionamiento_cta__c = f.Id;
        Test.startTest();
        update acc1;
        CLASS_Cuenta.guardaHistoricoAsignaciones(oldTriggerMap, new List<Account>{acc1});
        CLASS_Cuenta.creaPrimeraVisitaEdicion( new List<Account>{acc1}, oldTriggerMap);
        CLASS_Cuenta.asignaGerenteVentasEdicion( new List<Account>{acc1}, oldTriggerMap);
        CLASS_Cuenta.validacionesCuenta( new List<Account>{acc1}, oldTriggerMap);
        Test.stopTest(); 
    }  
    static TestMethod void Test4() {
        UserRole userrole = [Select Id, DeveloperName From UserRole Where PortalType= 'None' Limit 1];
        profile p = [Select Id From Profile Where Name='JAVER - Generico'];
        User user = new User();
        user.ProfileID = p.id;
        user.EmailEncodingKey = 'ISO-8859-1';
        user.LanguageLocaleKey = 'en_US';
        user.TimeZoneSidKey = 'America/New_York';
        user.LocaleSidKey = 'en_US';
        user.is_Data_Migration_User__c = true;
        user.FirstName = 'first';
        user.LastName = 'last';
        user.Username = 'test@portal123453.com';
        user.CommunityNickname = 'testUser123';
        user.Alias = 't1';
        user.Email = 'no@email.com';
        user.IsActive = true;
        user.FRACCIONAMIENTOS__c = 'ACACIAS;ACACIAS II';
        user.FraccionamientoAutorizados__c = 'ACACIAS';
        user.title= 'GENERICO';
        insert user;
        System.runAs(user){    
            Id idTipoRegistroProspectoPersonaFisica = Schema.SObjectType.Account.getRecordTypeInfosByDeveloperName().get('Prospecto_Persona_Fisica').getRecordTypeId();
            Fraccionamiento__c f = new Fraccionamiento__c(name = 'ACACIAS');insert f;
            Fraccionamiento__c f1 = new Fraccionamiento__c(name = 'ACACIAS');insert f1;
            Account acc = new Account(Apellidomaterno_cta__c = 'materno',FirstName = 'DA ame',LastName = 'lName',
                                      TelefonoCelular__c = '+525656566567',phone = '+525656566567',
                                      Fraccionamiento_cta__c = f1.id,RecordTypeId = idTipoRegistroProspectoPersonaFisica);
            Account acc1 = acc.clone(false, true, false, false);
            acc1.Canal_de_Venta__c = 'MEDIOS DIGITALES';
            acc1.Sub_canal_de_venta__c = '';
            acc1.Check_Apellido__c = true;
            acc1.Sexo__c = 'MASCULINO';
            acc1.Nacionalidad__c = 'MEXICANA';
            acc1.Lugar_Nacimiento__c = 'AGUASCALIENTES';
            acc1.CorreoElectronico__c = 'test@portal123453.com';
            acc1.Fecha_de_Afluencia__c = date.today().addDays(-1);
            acc1.PersonBirthdate = date.today().addyears(-20);
            insert acc1;
            CLASS_Cuenta CLASSCuenta = new CLASS_Cuenta(); 
            CLASS_Cuenta.generacionComplementoCURP(acc1);
            CLASS_Cuenta.generacionDigitoVerCurp('Cuando alguno de los caracteres de la pre CURP no es válido.');
            CLASS_Cuenta.generacionHomoclave(acc1);
            Colaborador_Javer__c col = new Colaborador_Javer__c();
            insert col;
            Map<Id, Account> oldTriggerMap = new Map<Id, Account>([SELECT Id, Name, anios__c, FechaNacimiento__c, Dias_fecha_nacimiento__c, Apellidomaterno_cta__c, Apellidopaterno_cta__c, Aprobalguard__c, Aprobcontact__c, Asesor__c, CanalVenta__c, Capcom_cta__c, Correoduenact__c, Correlect_cta__c, DependientesEconomicos__c, Empresa__c, Check_Apellido__c, Estatus__c, Estatus_Integracion__c, FechaAsignacion__c, FechaProspeccion__c, Fechest_cta__c, Fechprec_cta__c, Geolocalizacion__Latitude__s, Geolocalizacion__Longitude__s, Geolocalizacion__c, Hijos__c, Id_Ase__c, Id_Pro__c, Id_Colaborador_Javer__c, IdMasComercial__c, ID_owner__c, Aprobo_Check_Apellido__c, Meses__c, Monaho_cta__c, Montgast_cta__c, CURP__c, Homoclave__c, Nombre_cta__c, Nombre_Ase__c, Nombre_Pro__c, Nombre_Colaborador_Javer__c, NSS__c, Lead_Profiler__c, Prospectador__c, Puesto__c, Punnec_cta__c, Puntot_cta__c, Saldsub_cta__c, Sexo__c, SubCanalVenta__c, TelefonoCelular__c, TelefonoTrabajo__c, Tipo__c, TipoCredito__c, Capcomp_cta__c, Difdiastoday__c, NumeroExterior__c, NumeroInterior__c, Fraccionamiento_cta__c, Pais_cta__c, Estado_cta__c, Municipiocta__c, Colonia_cta__c, Calle__c, Ir_a_la_Cuenta__c, FechaDuplicada__c, ProfileID__c, Correodueante__c, Correo_Admin_de_Owner__c, Fecha_Prospeccion_vs_Today__c, Correo_Delegado_de_Owner__c, BillingColony__c, Campo_due_o_anterior_2__c, CorreAlterno__c, CorreoElectronico__c, Correoduenant__c, Entrega__c, Estadofracc_cta__c, Integracion_realizada__c, Municipio_cta__c, Notaria__c, Notario__c, Numerodecliente__c, ProductoFinanciero__c, ReferenciaBancariaCliente__c, Residentedeedificacion__c, Residente_de_Entrega__c, Sub_Canal_Venta__c, Telefono2__c, TelefonoOtro__c, TelefonoRecados__c, TipoCliente__c, Valida_Fecha_Duplicados2__c, Valida_Fecha_Duplicados__c, cuentaNueva__c, isATC__c, Medio_de_contacto_Preferido__c, Acepto_aviso_de_privacidad__c, Fecha_Reactivacion__c, Fecha_creacion__c, NumCliente__c, EstatusProceso__c, FechaFormalizacion__c, FechaEscrituracion__c, FechaReserva__c, NumProceso__c, Antiguedad__c, Fecha_de_Habitabilidad__c, Programadora_de_Vivienda_Id__c, Vivienda_Mas_Reciente__c, Tipo_de_Vivienda__c, SF_Link__c, Residente_Inactivo__c, JMC_AsesorAsignado__c, JMC_EstatusLead__c, JMC_Estatus_Cuenta__c, JMC_Estatus_Proceso__c, JMC_Fecha_Afluencia__c, JMC_Fecha_Cancelacion__c, JMC_Fecha_Entrega__c, JMC_Fecha_Visita__c, JMC_Lote__c, JMC_Manzana__c, JMC_Unidad_Privativa__c, Prospecto__c, UEN__c, JMC_Carga_inicial__c, JMC_TipoCargaInicial__c, Asesores__c, Nombre_Incompleto__c, Fecha_Estatus__c, Categoria__c, Etapa_Seguimiento__c, Estado_Civil__c, Edad__c, Nacionalidad__c, Lugar_Nacimiento__c, Ingresos_Mensuales__c, Ocupacion__c, MANAGEAPPROVALS__Active__c, RFC_Base__c, Homoclave_Texto__c, RFC_Completo__c, Tipo_Economia__c, QEQ_Nombre__c, Fecha_LP__c, Fecha_Asignacion_Asesor__c, Motivo_Asignacion__c, QEQ_Apellido_Paterno__c, QEQ_Apellido_Materno__c, QEQ_Fecha_Nacimiento__c, QEQ_Sexo__c, QEQ_CURP__c, QEQ_RFC__c, Fecha_Nacimiento_Texto__c, Gerente_Ventas__c, Desasignacion_Auto_Colaborador_Javer__c, Fecha_Colaborador_Javer__c, Parentesco__c, Origen__c, Recomendante__c, Tipo_Baja__c, Motivo_Baja__c, Motivo_Incubacion__c, Motivo_Reactivacion__c, Financiera__c, Producto_Financiera__c, Tipo_de_Prospeccion__c, Extension_Vencimiento_Asesor__c, Numero_de_Oportunidades__c, Estatus_Lista_Negra_QEQ__c, Dias_Colaborador_Javer__c, Colaborador_Javer_Anterior__c, Numero_Identificacion_Unico__c, Telefono_Principal__c, Prototipo_lookup__c, Jefe_Formalizacion__c, Estatus_Cliente__c, Fecha_Captura__c, Afluencia_Virtual__c, Estatus_Asesor__c, Estatus_Prospectador__c, Estatus_LP__c, Estatus_Colaborador_Javer__c, Fecha_Estatus_Asesor__c, Fecha_Estatus_Prospectador__c, Fecha_Estatus_LP__c, Fecha_Estatus_Colaborador_Javer__c, Otro_Telefono__c, Colaborador_Javer__c, Dias_Vencimiento_Asesor__c, Canal_de_Venta__c, Desasignacion_Auto_Asesor__c, Tipo_Credito__c, Desasignacion_Auto_Prospectador__c, Capacidad_de_compra__c, Desasignacion_Auto_Lead_Profiler__c, Fecha_Hora_LP__c, Fecha_Hora_Prospeccion__c, Producto_Financiero__c, Etapa__c, Nombre_Fraccionamiento__c, Visitas_Realizadas__c, Dias_Vencimiento_Prospectador__c, Dias_Vencimiento_LP__c, Dias_Vencimiento_Colaborador_Javer__c, Fecha_de_Afluencia__c, Sub_canal_de_venta__c, Email_Colaborador_Javer__c, Fecha_Hora_Asignacion_Asesor__c, Fecha_Vencimiento_LP__c, Fecha_Prospeccion__c, Fecha_Vencimiento_Prospectador__c, Fecha_Vencimiento_Asesor__c, Asesor_Vencido__c, Fecha_Vencimiento_Colaborador_Javer__c, Colaborador_Javer_Asignacion__c, Colaborador_Javer_Asignacion_Prorroga__c, Colaborador_Javer_Asignado__c, Colaborador_Javer_Asignado_Prorroga__c, Colaborador_Javer_Vencido__c, Fecha_Hora_Colaborador_Javer__c, Tipo_Contribuyente__c, Nombre__c, Contador_Auto_Desasignacion__c, No_Cliente__c, Prospectador_Primera_Parte_Formula__c, Prospectador_Segunda_Parte_Formula__c, Lead_Profiler_Primera_Parte_Formula__c, Lead_Profiler_Segunda_Parte_Formula__c, Colab_Javer_Primera_Parte_Formula__c, Colab_Javer_Segunda_Parte_Formula__c, Asesor_Primera_Parte_Formula__c, Asesor_Segunda_Parte_Formula__c, ID_CLIENTE_AR__c, ROW_ID__c, ID_PROCESO_AR__c, MENSAJE_API__c, RESPUESTA_API__c, Fecha_Notificacion_Vencimiento_Asesor__c, FechaNacimiento_Formula__c, Fecha_Asignacion_Asesor_Formula__c, Fecha_Propuesta__c, Fecha_de_Captura_Formula__c, Leader__c, Logo_Fraccionamiento__c, Nombre_del_Asesor__c, QUOTE_Correo_Asesor__c, QUOTE_Nombre_Fracc__c, QUOTE_Telefono_Asesor__c, Quote_Prototipo__c, RecordTypeName__c, Tipo_Formula__c, Aviso_de_Privadidad_Relacionado2__c, Aviso_de_Privadidad_Relacionado__c, Escolaridad__c, Fecha_a_Contactar__c, Fecha_de_Prospeccion__c, Motivo_de_Compra__c, Nombre_Completo__c, Nombre_del_Fraccionamiento__c, QUOTE_Bonificacion__c, QUOTE_Construccion__c, QUOTE_Credito_Bancario__c, QUOTE_Credito_INFONAVIT__c, QUOTE_Esquina__c, QUOTE_Fecha_de_Vencimiento__c, QUOTE_Folio_Cotizacion__c, QUOTE_Gastos_Credito__c, QUOTE_Gastos__c, QUOTE_Ingreso_Solicitado__c, QUOTE_Lote_Tipo__c, QUOTE_Mensualidad_Banco__c, QUOTE_Mensualidad_INFONAVIT__c, QUOTE_Otros__c, QUOTE_Paquete_Descripcion__c, QUOTE_Precio_de_Lista__c, QUOTE_Promocion__c, QUOTE_Subcuenta__c, QUOTE_Terreno_Excedente__c, QUOTE_Total_Paquete__c, QUOTE_Ubicacion_Especial__c, QUOTE_m2_Excedentes__c, Tipo_de_Direccion__c, Tipo_de_Vivienda_Picklist__c, Zona__c, debugg__c, QUOTE_Enganche_a_Pagar__c, QUOTE_Folio_Cotizacion_Formula__c, QUOTE_Monto_que_Recibira_JAVER__c, QUOTE_Precio_Total__c, QUOTE_Precio__c, QUOTE_Total_Atributos__c, QUOTE_Total_Terreno_Excedente__c, Baja_Incubadora__c, ValidationBypassDateTime__c, IsVRBypassed__c, Fecha_ltima_visita__c, Numero_de_Cliente_AutoNum__c, Estatus_Cliente_Anterior__c, Tipo_de_Tramite__c, et4ae5__HasOptedOutOfMobile__pc, et4ae5__Mobile_Country_Code__pc
                                                                   FROM Account WHERE Id =:acc1.Id ]);
            Test.startTest();
            acc1.Colaborador_Javer__c = col.id;
            acc1.Fecha_de_Afluencia__c = Date.today();
            acc1.Aprobo_Check_Apellido__c = false; 
            acc1.Fraccionamiento_cta__c = f.Id;
            acc1.Lead_Profiler__c = user.Id;
            update acc1;
            CLASS_Cuenta.asignaGerenteVentasEdicion( new List<Account>{acc1}, oldTriggerMap);
            CLASS_Cuenta.validacionesCuenta( new List<Account>{acc1}, oldTriggerMap);
            CLASS_Cuenta.generacionBaseRFCCURP(acc1);
            Test.stopTest();
        }
    }  
    static TestMethod void Test5() {
        CLASS_Cuenta.CLASS_CuentaCodeCoverage();
    }
}